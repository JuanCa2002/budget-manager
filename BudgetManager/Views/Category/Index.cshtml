@using BudgetManager.Models.Entities
@using BudgetManager.Models.ViewModels
@model PaginationResponseWithItemsViewModel<Category>

@{
    ViewData["Title"] = "Categorías";

    ConfirmationModalViewModel confirmationModalViewModel = new()
    {
        ModalTitle = "Eliminar Registro",
        ModalTextBody = "¿Está seguro que desea borrar la categoría ",
        ActionTarget = "Delete",
        ControllerTarget = "Category"
    };
}

<h1>Categorias</h1>

<a asp-action="Create" class="btn btn-success my-3">Crear nueva</a>

<partial name="_Pagination"></partial>

<table class="table">
    <thead>
        <tr>
            <th scope="col">Acciones</th>
            <th scope="col">Nombre</th>
            <th scope="col">Tipo Transacción</th>
        </tr>
    </thead>
    <tbody>
        @foreach(var category in Model.Rows)
        {
            <tr>
                <td>
                    <a asp-action="Edit" asp-route-id="@category.Id" class="btn btn-primary"><i title="Editar" class="bi bi-pencil-fill"></i></a>
                    <a 
                       data-bs-toggle="modal"
                       data-bs-target="#staticBackdrop"
                       data-id="@category.Id"
                       data-name="@category.Name"
                       onclick="openConfirmationModal(this)"
                       class="btn btn-danger"><i title="Eliminar" class="bi bi-trash3-fill"></i></a>
                </td>
                <td>@category.Name</td>
                <td>@category.TransactionTypeId.ToString()</td>
            </tr>
        }
    </tbody>
</table>

<partial name="_ConfirmationModal" model="@confirmationModalViewModel" />

@section Scripts {
    <partial name="_ConfirmationModalScript" model="confirmationModalViewModel" />
    <script src="~/js/pagination.js" asp-append-version="true"></script>
    <script>
        onChangeRowsPerPage("@Model.BaseURL");
    </script>
}